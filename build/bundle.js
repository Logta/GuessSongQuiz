var app=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(e);function s(){}function o(t){return t()}function l(){return Object.create(null)}function c(t){t.forEach(o)}function i(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function $(){return p(" ")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}let b;function y(t){b=t}const C=[],_=[],A=[],k=[],S=Promise.resolve();let E=!1;function B(t){A.push(t)}let j=!1;const F=new Set;function T(){if(!j){j=!0;do{for(let t=0;t<C.length;t+=1){const e=C[t];y(e),q(e.$$)}for(y(null),C.length=0;_.length;)_.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];F.has(e)||(F.add(e),e())}A.length=0}while(C.length);for(;k.length;)k.pop()();E=!1,j=!1,F.clear()}}function q(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const z=new Set;let L;function N(){L={r:0,c:[],p:L}}function O(){L.r||c(L.c),L=L.p}function P(t,e){t&&t.i&&(z.delete(t),t.i(e))}function I(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),L.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function M(t){t&&t.c()}function R(t,e,n){const{fragment:r,on_mount:s,on_destroy:l,after_update:a}=t.$$;r&&r.m(e,n),B((()=>{const e=s.map(o).filter(i);l?l.push(...e):c(e),t.$$.on_mount=[]})),a.forEach(B)}function D(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(C.push(t),E||(E=!0,S.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,r,o,i,a=[-1]){const u=b;y(t);const f=e.props||{},d=t.$$={fragment:null,ctx:null,props:i,update:s,not_equal:o,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:a,skip_bound:!1};let g=!1;if(d.ctx=n?n(t,f,((e,n,...r)=>{const s=r.length?r[0]:n;return d.ctx&&o(d.ctx[e],d.ctx[e]=s)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](s),g&&G(t,e)),n})):[],d.update(),g=!0,c(d.before_update),d.fragment=!!r&&r(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();e.intro&&P(t.$$.fragment),R(t,e.target,e.anchor),T()}y(u)}class J{$destroy(){D(this,1),this.$destroy=s}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class K{constructor(t,e){this.score=[],this.name=t,this.answer=e}}const Q=t=>new K(t[1],t.slice(2)),U=t=>t.replace(/[\"]/g,"");function V(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function W(t){let e,n,r=t[3]+1+"";return{c(){e=g("th"),n=p(r),v(e,"width",80/t[0].length+"%")},m(t,r){f(t,e,r),u(e,n)},p(t,n){1&n&&v(e,"width",80/t[0].length+"%")},d(t){t&&h(e)}}}function X(t){let e,n,r,o,l=t[0],c=[];for(let e=0;e<l.length;e+=1)c[e]=W(V(t,l,e));return{c(){e=g("thead"),n=g("tr"),r=g("th"),r.textContent="回答者",o=$();for(let t=0;t<c.length;t+=1)c[t].c();v(r,"width","20%"),w(n,"class","svelte-1eaqam3"),w(e,"class","svelte-1eaqam3")},m(t,s){f(t,e,s),u(e,n),u(n,r),u(n,o);for(let t=0;t<c.length;t+=1)c[t].m(n,null)},p(t,[e]){if(1&e){let r;for(l=t[0],r=0;r<l.length;r+=1){const s=V(t,l,r);c[r]?c[r].p(s,e):(c[r]=W(s),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=l.length}},i:s,o:s,d(t){t&&h(e),d(c,t)}}}function Y(t,e,n){let{header:r}=e;return t.$$set=t=>{"header"in t&&n(0,r=t.header)},[r]}class Z extends J{constructor(t){super(),H(this,t,Y,X,a,{header:0})}}function tt(t,e,n){const r=t.slice();return r[1]=e[n],r}function et(t){let e,n,r,s=t[1].replace(/[\"]/g,"")+"";return{c(){e=g("td"),n=p(s),r=$(),v(e,"width",80/t[0].answer.length+"%"),w(e,"class","svelte-1d5xwpr")},m(t,s){f(t,e,s),u(e,n),u(e,r)},p(t,r){1&r&&s!==(s=t[1].replace(/[\"]/g,"")+"")&&x(n,s),1&r&&v(e,"width",80/t[0].answer.length+"%")},d(t){t&&h(e)}}}function nt(t){let e,n,r,o,l=t[0].name.replace(/[\"]/g,"")+"",c=t[0].answer,i=[];for(let e=0;e<c.length;e+=1)i[e]=et(tt(t,c,e));return{c(){e=g("tr"),n=g("td"),r=p(l),o=$();for(let t=0;t<i.length;t+=1)i[t].c();v(n,"width","20%"),w(n,"class","svelte-1d5xwpr"),w(e,"class","svelte-1d5xwpr")},m(t,s){f(t,e,s),u(e,n),u(n,r),u(e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null)},p(t,[n]){if(1&n&&l!==(l=t[0].name.replace(/[\"]/g,"")+"")&&x(r,l),1&n){let r;for(c=t[0].answer,r=0;r<c.length;r+=1){const s=tt(t,c,r);i[r]?i[r].p(s,n):(i[r]=et(s),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=c.length}},i:s,o:s,d(t){t&&h(e),d(i,t)}}}function rt(t,e,n){let{answers:r}=e;return t.$$set=t=>{"answers"in t&&n(0,r=t.answers)},[r]}class st extends J{constructor(t){super(),H(this,t,rt,nt,a,{answers:0})}}function ot(t,e,n){const r=t.slice();return r[1]=e[n],r}function lt(t){let e,n,r=U(t[1])+"";return{c(){e=g("td"),n=p(r)},m(t,r){f(t,e,r),u(e,n)},p(t,e){1&e&&r!==(r=U(t[1])+"")&&x(n,r)},d(t){t&&h(e)}}}function ct(t){let e,n,r,o,l=t[0],c=[];for(let e=0;e<l.length;e+=1)c[e]=lt(ot(t,l,e));return{c(){e=g("tfoot"),n=g("tr"),r=g("td"),r.textContent="正解",o=$();for(let t=0;t<c.length;t+=1)c[t].c();w(n,"class","svelte-fou2nt"),w(e,"class","svelte-fou2nt")},m(t,s){f(t,e,s),u(e,n),u(n,r),u(n,o);for(let t=0;t<c.length;t+=1)c[t].m(n,null)},p(t,[e]){if(1&e){let r;for(l=t[0],r=0;r<l.length;r+=1){const s=ot(t,l,r);c[r]?c[r].p(s,e):(c[r]=lt(s),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=l.length}},i:s,o:s,d(t){t&&h(e),d(c,t)}}}function it(t,e,n){let{footer:r}=e;return t.$$set=t=>{"footer"in t&&n(0,r=t.footer)},[r]}class at extends J{constructor(t){super(),H(this,t,it,ct,a,{footer:0})}}function ut(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function ft(t){let e,n,r,s,o,l,c;n=new Z({props:{header:t[0].getAnswers()[0].answer}});let i=t[0].getAnswers(),a=[];for(let e=0;e<i.length;e+=1)a[e]=ht(ut(t,i,e));const p=t=>I(a[t],1,1,(()=>{a[t]=null}));return l=new at({props:{footer:t[0].getCorrect("ok")}}),{c(){e=g("table"),M(n.$$.fragment),r=$(),s=g("tbody");for(let t=0;t<a.length;t+=1)a[t].c();o=$(),M(l.$$.fragment),w(s,"class","svelte-1cztun6"),w(e,"class","svelte-1cztun6")},m(t,i){f(t,e,i),R(n,e,null),u(e,r),u(e,s);for(let t=0;t<a.length;t+=1)a[t].m(s,null);u(e,o),R(l,e,null),c=!0},p(t,e){const r={};if(1&e&&(r.header=t[0].getAnswers()[0].answer),n.$set(r),1&e){let n;for(i=t[0].getAnswers(),n=0;n<i.length;n+=1){const r=ut(t,i,n);a[n]?(a[n].p(r,e),P(a[n],1)):(a[n]=ht(r),a[n].c(),P(a[n],1),a[n].m(s,null))}for(N(),n=i.length;n<a.length;n+=1)p(n);O()}const o={};1&e&&(o.footer=t[0].getCorrect("ok")),l.$set(o)},i(t){if(!c){P(n.$$.fragment,t);for(let t=0;t<i.length;t+=1)P(a[t]);P(l.$$.fragment,t),c=!0}},o(t){I(n.$$.fragment,t),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)I(a[t]);I(l.$$.fragment,t),c=!1},d(t){t&&h(e),D(n),d(a,t),D(l)}}}function ht(t){let e,n,r=0!=t[3]&&function(t){let e,n;return e=new st({props:{answers:t[1]}}),{c(){M(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.answers=t[1]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}(t);return{c(){r&&r.c(),e=p("")},m(t,s){r&&r.m(t,s),f(t,e,s),n=!0},p(t,e){0!=t[3]&&r.p(t,e)},i(t){n||(P(r),n=!0)},o(t){I(r),n=!1},d(t){r&&r.d(t),t&&h(e)}}}function dt(t){let e,n,r=t[0]&&ft(t);return{c(){e=g("div"),r&&r.c(),w(e,"id","answerTable")},m(t,s){f(t,e,s),r&&r.m(e,null),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&P(r,1)):(r=ft(t),r.c(),P(r,1),r.m(e,null)):r&&(N(),I(r,1,1,(()=>{r=null})),O())},i(t){n||(P(r),n=!0)},o(t){I(r),n=!1},d(t){t&&h(e),r&&r.d()}}}function gt(t,e,n){let{answers:r}=e;return t.$$set=t=>{"answers"in t&&n(0,r=t.answers)},[r]}class pt extends J{constructor(t){super(),H(this,t,gt,dt,a,{answers:0})}}class $t{constructor(){this.getAnswers=()=>this.answers,this.setAnswers=t=>{const e=t.map((t=>{t.answer.length})),n=1==Array.from(new Set(e)).length;return this.answers=n?t:void 0,n},this.getCorrect=t=>{let e=[];for(let n=0;n<this.answers[0].answer.length;n++)for(const r of this.answers)if(U(r.answer[n])===t){e.push(r.name);break}return e},this.calcScore=t=>{const e=this.getCorrect(t);for(const t of this.answers){let n=[];t.answer.forEach(((t,r)=>{const s=e[r];n.push(U(t)===U(s))})),t.score=n}},this.getScoreBoard=t=>{let e=new Array;for(const n of this.answers){let r=[];r.push(n.name),r.push(this.getScoreForScoreBoard(n,t)),e.push(r)}return e},this.getScoreForScoreBoard=(t,e)=>{const n=this.getCorrect(e);let r=0;return r=t.score.filter((t=>t)).length,n.forEach(((e,n)=>{if(U(e)===U(t.name)){const e=this.answers.filter((t=>t.score[n])).length;console.log(t.name),console.log("index:"+n),console.log("point:"+(0===e?0:this.answers.length-2-e)),r+=0===e?0:this.answers.length-2-e}})),r.toString()}}}function mt(t){let e,n,r,o,l,c,i=t[0][0]+"",a=t[0][1]+"";return{c(){e=g("tr"),n=g("th"),r=p(i),o=$(),l=g("td"),c=p(a),v(n,"width","20%"),v(l,"width","20%"),w(l,"class","svelte-1d5xwpr"),w(e,"class","svelte-1d5xwpr")},m(t,s){f(t,e,s),u(e,n),u(n,r),u(e,o),u(e,l),u(l,c)},p(t,[e]){1&e&&i!==(i=t[0][0]+"")&&x(r,i),1&e&&a!==(a=t[0][1]+"")&&x(c,a)},i:s,o:s,d(t){t&&h(e)}}}function wt(t,e,n){let{score:r}=e;return t.$$set=t=>{"score"in t&&n(0,r=t.score)},[r]}class xt extends J{constructor(t){super(),H(this,t,wt,mt,a,{score:0})}}function vt(t,e,n){const r=t.slice();return r[1]=e[n],r}function bt(t){let e,n,r=t[0].getScoreBoard("ok"),s=[];for(let e=0;e<r.length;e+=1)s[e]=yt(vt(t,r,e));const o=t=>I(s[t],1,1,(()=>{s[t]=null}));return{c(){e=g("table");for(let t=0;t<s.length;t+=1)s[t].c();w(e,"class","svelte-9b14pv")},m(t,r){f(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){if(1&n){let l;for(r=t[0].getScoreBoard("ok"),l=0;l<r.length;l+=1){const o=vt(t,r,l);s[l]?(s[l].p(o,n),P(s[l],1)):(s[l]=yt(o),s[l].c(),P(s[l],1),s[l].m(e,null))}for(N(),l=r.length;l<s.length;l+=1)o(l);O()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)P(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)I(s[t]);n=!1},d(t){t&&h(e),d(s,t)}}}function yt(t){let e,n;return e=new xt({props:{score:t[1]}}),{c(){M(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.score=t[1]),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ct(t){let e,n,r=t[0]&&bt(t);return{c(){e=g("div"),r&&r.c(),w(e,"id","answerTable")},m(t,s){f(t,e,s),r&&r.m(e,null),n=!0},p(t,[n]){t[0]?r?(r.p(t,n),1&n&&P(r,1)):(r=bt(t),r.c(),P(r,1),r.m(e,null)):r&&(N(),I(r,1,1,(()=>{r=null})),O())},i(t){n||(P(r),n=!0)},o(t){I(r),n=!1},d(t){t&&h(e),r&&r.d()}}}function _t(t,e,n){let{scores:r}=e;return t.$$set=t=>{"scores"in t&&n(0,r=t.scores)},[r]}class At extends J{constructor(t){super(),H(this,t,_t,Ct,a,{scores:0})}}function kt(t){let e,n,r,s,o,l,i,a,d,p,x,v,b,y,C,_,A,k,S,E,B;return _=new pt({props:{answers:t[0]}}),k=new At({props:{scores:t[0]}}),{c(){e=g("div"),n=g("h1"),n.textContent="曲あてクイズ",r=$(),s=g("h2"),s.textContent="得点計算",o=$(),l=g("div"),i=g("h3"),i.textContent="ファイル指定",a=$(),d=g("input"),p=$(),x=g("div"),v=g("h3"),v.textContent="計算",b=$(),y=g("button"),y.textContent="計算開始",C=$(),M(_.$$.fragment),A=$(),M(k.$$.fragment),w(n,"class","svelte-ls3497"),w(d,"type","file"),w(d,"id","file"),w(l,"class","svelte-ls3497"),w(x,"class","svelte-ls3497"),w(e,"id","home"),w(e,"class","svelte-ls3497")},m(c,h){f(c,e,h),u(e,n),u(e,r),u(e,s),u(e,o),u(e,l),u(l,i),u(l,a),u(l,d),u(e,p),u(e,x),u(x,v),u(x,b),u(x,y),u(e,C),R(_,e,null),u(e,A),R(k,e,null),S=!0,E||(B=[m(d,"change",t[1]),m(y,"click",t[2])],E=!0)},p(t,[e]){const n={};1&e&&(n.answers=t[0]),_.$set(n);const r={};1&e&&(r.scores=t[0]),k.$set(r)},i(t){S||(P(_.$$.fragment,t),P(k.$$.fragment,t),S=!0)},o(t){I(_.$$.fragment,t),I(k.$$.fragment,t),S=!1},d(t){t&&h(e),D(_),D(k),E=!1,c(B)}}}function St(t,e,n){let r,s="";return[r,t=>{var e=t.target.files[0],n=new FileReader;null!=e.name.match(".csv$")?(n.onerror=function(){alert("ファイル読み取りに失敗しました")},n.readAsText(e),n.addEventListener("load",(function(){s=n.result}))):alert("csvファイルを選択してください")},()=>{const t=(t=>t.split("\n").map((t=>Q(t.split(",")))))(s);n(0,r=new $t),r.setAnswers(t),r.calcScore("ok")}]}class Et extends J{constructor(t){super(),H(this,t,St,kt,a,{})}}function Bt(t){let e,n;return e=new Et({}),{c(){M(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function jt(e){let n,s,o,l,c=!e[0].projectId&&function(t){let e,n,r,s,o,l;return{c(){e=g("strong"),e.textContent="Step 0",n=p("\n\t\tCreate a\n\t\t"),r=g("a"),r.textContent="Firebase Project",s=p("\n\t\tand paste your web config into\n\t\t"),o=g("code"),o.textContent="App.svelte",l=p("\n\t\t."),w(r,"href","https://firebase.google.com/")},m(t,c){f(t,e,c),f(t,n,c),f(t,r,c),f(t,s,c),f(t,o,c),f(t,l,c)},d(t){t&&h(e),t&&h(n),t&&h(r),t&&h(s),t&&h(o),t&&h(l)}}}();return o=new t.FirebaseApp({props:{firebase:r.default,$$slots:{default:[Bt]},$$scope:{ctx:e}}}),{c(){n=g("main"),c&&c.c(),s=$(),M(o.$$.fragment),w(n,"class","svelte-n50bxl")},m(t,e){f(t,n,e),c&&c.m(n,null),u(n,s),R(o,n,null),l=!0},p(t,[e]){const n={};2&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){l||(P(o.$$.fragment,t),l=!0)},o(t){I(o.$$.fragment,t),l=!1},d(t){t&&h(n),c&&c.d(),D(o)}}}function Ft(t){let e={};return r.default.initializeApp(e),[e]}return new class extends J{constructor(t){super(),H(this,t,Ft,jt,a,{})}}({target:document.body,props:{name:"world"}})}(sveltefire,firebase);
//# sourceMappingURL=bundle.js.map
